import{a as N,b as M,c as P}from"./chunk-67BDTVMV.js";import{h as T,k as R,l as L}from"./chunk-MSHCLZU5.js";import{Ab as y,Ba as a,Pb as E,Ra as S,Va as x,W as k,ab as s,ba as f,bb as t,ca as h,cb as i,db as g,dc as I,ec as _,hc as D,ja as v,mb as u,ub as w,vb as b,xb as n,yb as m,zb as p}from"./chunk-XH6OYFID.js";function H(r,l){if(r&1&&(t(0,"div",6),n(1),i()),r&2){let e=u();b("text-green-400",e.trend==="up")("text-red-400",e.trend==="down")("text-gray-400",!e.trend),a(),p(" ",e.subtitle," ")}}var C=class r{label;value;icon;subtitle;trend;static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-stat-card"]],inputs:{label:"label",value:"value",icon:"icon",subtitle:"subtitle",trend:"trend"},decls:9,vars:4,consts:[[1,"bg-f1-surface","rounded-xl","border","border-gray-800","p-6","hover:border-gray-700","transition-all"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-gray-400","text-sm","font-medium"],[1,"text-2xl"],[1,"text-3xl","font-bold","text-black","dark:text-white","mb-1"],["class","text-sm",3,"text-green-400","text-red-400","text-gray-400",4,"ngIf"],[1,"text-sm"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"span",2),n(3),i(),t(4,"span",3),n(5),i()(),t(6,"div",4),n(7),i(),x(8,H,2,7,"div",5),i()),e&2&&(a(3),m(o.label),a(2),m(o.icon),a(2),m(o.value),a(),s("ngIf",o.subtitle))},dependencies:[D,_],styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{transition:all .3s ease}div[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 20px #00f0ff1a}"]})};function U(r,l){r&1&&g(0,"app-loading")}function $(r,l){if(r&1&&g(0,"app-stat-card",36),r&2){let e,o,c=u(2);s("value",((e=c.getTopDrivers(1)[0])==null||e.Driver==null?null:e.Driver.familyName)||"-")("subtitle",((o=c.getTopDrivers(1)[0])==null?null:o.points)+" points")}}function A(r,l){if(r&1&&g(0,"app-stat-card",37),r&2){let e,o,c=u(2);s("value",((e=c.getTopTeams(1)[0])==null||e.Constructor==null?null:e.Constructor.name)||"-")("subtitle",((o=c.getTopTeams(1)[0])==null?null:o.points)+" points")}}function B(r,l){if(r&1&&g(0,"app-stat-card",38),r&2){let e=u(2);s("value",e.getDaysUntilNextRace())}}function W(r,l){if(r&1&&(t(0,"div",30)(1,"app-card",39)(2,"div",40)(3,"div",41)(4,"h3",42),n(5),i(),t(6,"p",43),n(7),i(),t(8,"p",44),n(9),i()(),t(10,"div",45)(11,"div",46),n(12),i(),t(13,"div",47),n(14,"days to go"),i()()()()()),r&2){let e,o,c,d=u(2);a(5),p(" ",(e=d.nextRace())==null?null:e.raceName," "),a(2),y(" ",(o=d.nextRace())==null||o.Circuit==null||o.Circuit.Location==null?null:o.Circuit.Location.locality,", ",(o=d.nextRace())==null||o.Circuit==null||o.Circuit.Location==null?null:o.Circuit.Location.country," "),a(2),y(" ",(c=d.nextRace())==null?null:c.date," \u2022 Round ",(c=d.nextRace())==null?null:c.round," "),a(3),m(d.getDaysUntilNextRace())}}function Y(r,l){if(r&1&&(t(0,"tr",48)(1,"td",49)(2,"span",50),n(3),i()(),t(4,"td",49)(5,"div",51)(6,"div")(7,"div",52),n(8),i(),t(9,"div",53),n(10),i()()()(),t(11,"td",54),n(12),i(),t(13,"td",55),n(14),i()()),r&2){let e=l.$implicit,o=l.index;w("animation-delay",o*.05,"s"),a(2),b("bg-yellow-500",e.position==="1")("text-black",e.position==="1")("bg-gray-400",e.position==="2")("text-black",e.position==="2")("bg-orange-600",e.position==="3")("text-white",e.position==="3")("bg-gray-200",e.position>"3")("text-gray-800",e.position>"3")("dark:bg-gray-800",e.position>"3")("dark:text-gray-300",e.position>"3"),a(),p(" ",e.position," "),a(5),y(" ",e.Driver.givenName," ",e.Driver.familyName," "),a(2),m(e.Driver.code),a(2),p(" ",e.Constructors[0]==null?null:e.Constructors[0].name," "),a(2),p(" ",e.points," ")}}function q(r,l){if(r&1&&(t(0,"tr",48)(1,"td",49)(2,"span",50),n(3),i()(),t(4,"td",49)(5,"div",52),n(6),i(),t(7,"div",53),n(8),i()(),t(9,"td",55),n(10),i(),t(11,"td",56),n(12),i()()),r&2){let e=l.$implicit,o=l.index;w("animation-delay",o*.05,"s"),a(2),b("bg-yellow-500",e.position==="1")("text-black",e.position==="1")("bg-gray-400",e.position==="2")("text-black",e.position==="2")("bg-orange-600",e.position==="3")("text-white",e.position==="3")("bg-gray-200",e.position>"3")("text-gray-800",e.position>"3")("dark:bg-gray-800",e.position>"3")("dark:text-gray-300",e.position>"3"),a(),p(" ",e.position," "),a(3),p(" ",e.Constructor.name," "),a(2),m(e.Constructor.nationality),a(2),p(" ",e.points," "),a(2),p(" ",e.wins," ")}}function J(r,l){if(r&1&&(t(0,"div",57)(1,"div",58)(2,"span",59),n(3),i(),t(4,"span",53),n(5),i()(),t(6,"h4",60),n(7),i(),t(8,"p",61),f(),t(9,"svg",26),g(10,"path",62)(11,"path",63),i(),n(12),i(),h(),t(13,"p",64),n(14),i()()),r&2){let e=l.$implicit;a(3),p("Round ",e.round),a(2),m(e.date),a(2),m(e.raceName),a(5),y(" ",e.Circuit.Location.locality,", ",e.Circuit.Location.country," "),a(2),m(e.Circuit.circuitName)}}function K(r,l){if(r&1&&(t(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1",6),n(4),i(),t(5,"p",7),n(6," Track live standings, race results, and driver performance "),i()(),t(7,"div",8),n(8,"\u{1F3CE}\uFE0F"),i()(),t(9,"div",9),x(10,$,1,2,"app-stat-card",10)(11,A,1,2,"app-stat-card",11)(12,B,1,1,"app-stat-card",12),g(13,"app-stat-card",13),i(),x(14,W,15,6,"div",14),t(15,"div",15)(16,"app-card",16)(17,"div",17)(18,"table",18)(19,"thead",19)(20,"tr")(21,"th",20),n(22,"Pos"),i(),t(23,"th",20),n(24,"Driver"),i(),t(25,"th",20),n(26,"Team"),i(),t(27,"th",21),n(28,"Points"),i()()(),t(29,"tbody",22),x(30,Y,15,28,"tr",23),i()()(),t(31,"div",24)(32,"a",25),n(33," View all drivers "),f(),t(34,"svg",26),g(35,"path",27),i()()()(),h(),t(36,"app-card",28)(37,"div",17)(38,"table",18)(39,"thead",19)(40,"tr")(41,"th",20),n(42,"Pos"),i(),t(43,"th",20),n(44,"Team"),i(),t(45,"th",21),n(46,"Points"),i(),t(47,"th",21),n(48,"Wins"),i()()(),t(49,"tbody",22),x(50,q,13,27,"tr",23),i()()(),t(51,"div",24)(52,"a",29),n(53," View all teams "),f(),t(54,"svg",26),g(55,"path",27),i()()()()(),h(),t(56,"div",30)(57,"app-card",31)(58,"div",32),x(59,J,15,6,"div",33),i(),t(60,"div",34)(61,"a",35),n(62," View full calendar "),f(),t(63,"svg",26),g(64,"path",27),i()()()()()()),r&2){let e,o,c,d=u();a(4),p(" Formula 1 ",(e=d.driverStandings())==null?null:e.season," Season "),a(6),s("ngIf",d.getTopDrivers(1).length>0),a(),s("ngIf",d.getTopTeams(1).length>0),a(),s("ngIf",d.nextRace()),a(),s("value",d.getCompletedRaces()+"/"+d.getTotalRaces())("subtitle","Round "+d.getCurrentRound()),a(),s("ngIf",d.nextRace()),a(2),s("noPadding",!0),a(14),s("ngForOf",(o=d.driverStandings())==null||o.DriverStandings==null?null:o.DriverStandings.slice(0,10)),a(6),s("noPadding",!0),a(14),s("ngForOf",(c=d.constructorStandings())==null?null:c.ConstructorStandings),a(9),s("ngForOf",d.raceCalendar().slice(0,6))}}var F=class r{apiService=k(P);seasonService=k(L);driverStandings=v(null);constructorStandings=v(null);raceCalendar=v(null);loading=v(!0);nextRace=v(null);constructor(){E(()=>{this.loadDashboardData(this.seasonService.selectedSeason())})}loadDashboardData(l){this.loading.set(!0),Promise.all([this.apiService.getDriverStandings(l).toPromise(),this.apiService.getConstructorStandings(l).toPromise(),this.apiService.getRaceCalendar(l).toPromise()]).then(([e,o,c])=>{this.driverStandings.set(e),this.constructorStandings.set(o),this.raceCalendar.set(c||[]);let d=new Date,O=(c||[]).find(j=>new Date(j.date)>d);this.nextRace.set(O),this.loading.set(!1)}).catch(e=>{console.error("Error loading dashboard: ",e),this.loading.set(!1)})}getTopDrivers(l=3){return this.driverStandings()?.DriverStandings?.slice(0,l)||[]}getTopTeams(l=3){return this.constructorStandings()?.ConstructorStandings?.slice(0,l)||[]}getDaysUntilNextRace(){if(!this.nextRace())return 0;let l=new Date,o=new Date(this.nextRace().date).getTime()-l.getTime();return Math.ceil(o/(1e3*60*60*24))}getCompletedRaces(){let l=new Date;return this.raceCalendar().filter(e=>new Date(e.date)<l).length}getTotalRaces(){return this.raceCalendar().length}getCurrentRound(){return this.getCompletedRaces()+1}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-dashboard"]],decls:3,vars:2,consts:[[1,"max-w-7xl","mx-auto"],[4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"space-y-6"],[1,"relative","bg-gradient-to-r","from-f1-primary","to-f1-surface","rounded-2xl","p-8","border","border-gray-300","dark:border-gray-800","overflow-hidden"],[1,"relative","z-10"],[1,"text-4xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-300","text-lg"],[1,"absolute","right-8","top-1/2","-translate-y-1/2","text-9xl","opacity-10"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],["label","Championship Leader","icon","\u{1F451}",3,"value","subtitle",4,"ngIf"],["label","Leading Team","icon","\u{1F3C1}",3,"value","subtitle",4,"ngIf"],["label","Next Race","icon","\u{1F4C5}","subtitle","days away",3,"value",4,"ngIf"],["label","Races Completed","icon","\u{1F3C6}",3,"value","subtitle"],["class","grid grid-cols-1 gap-6",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["title","Driver Standings",3,"noPadding"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-100","dark:bg-gray-900"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-600","dark:text-gray-400","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-600","dark:text-gray-400","uppercase","tracking-wider"],[1,"divide-y","divide-gray-200","dark:divide-gray-800"],["class","hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer",3,"animation-delay",4,"ngFor","ngForOf"],[1,"px-6","py-4","bg-gray-100","dark:bg-gray-900","border-t","border-gray-200","dark:border-gray-800"],["routerLink","/drivers",1,"text-f1-accent","hover:text-f1-accent/80","text-sm","font-medium","inline-flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["title","Constructor Standings",3,"noPadding"],["routerLink","/teams",1,"text-f1-accent","hover:text-f1-accent/80","text-sm","font-medium","inline-flex","items-center","gap-2"],[1,"grid","grid-cols-1","gap-6"],["title","Race Calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-gray-100 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 transition-all cursor-pointer hover:transform hover:scale-105",4,"ngFor","ngForOf"],[1,"mt-6","text-center"],["routerLink","/races",1,"text-f1-accent","hover:text-f1-accent/80","text-sm","font-medium","inline-flex","items-center","gap-2"],["label","Championship Leader","icon","\u{1F451}",3,"value","subtitle"],["label","Leading Team","icon","\u{1F3C1}",3,"value","subtitle"],["label","Next Race","icon","\u{1F4C5}","subtitle","days away",3,"value"],["title","Next Race"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-4"],[1,"flex-1"],[1,"text-2xl","font-bold","text-black","dark:text-white","mb-1"],[1,"text-gray-600","dark:text-gray-400"],[1,"text-f1-accent","mt-2","font-medium"],[1,"text-center","bg-gray-100","dark:bg-gray-900","rounded-lg","p-6"],[1,"text-5xl","font-bold","text-f1-accent"],[1,"text-gray-600","dark:text-gray-400","mt-2"],[1,"hover:bg-gray-50","dark:hover:bg-gray-900","transition-colors","cursor-pointer"],[1,"px-6","py-4","whitespace-nowrap"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-bold"],[1,"flex","items-center"],[1,"text-sm","font-medium","text-black","dark:text-white"],[1,"text-xs","text-gray-600","dark:text-gray-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600","dark:text-gray-300"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-bold","text-f1-accent"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","text-gray-600","dark:text-gray-300"],[1,"bg-gray-100","dark:bg-gray-900","rounded-lg","p-4","border","border-gray-200","dark:border-gray-800","hover:border-gray-300","dark:hover:border-gray-700","transition-all","cursor-pointer","hover:transform","hover:scale-105"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","font-semibold","text-f1-accent","bg-f1-accent/10","px-2","py-1","rounded"],[1,"text-black","dark:text-white","font-bold","mb-1","text-lg"],[1,"text-sm","text-gray-600","dark:text-gray-400","flex","items-center","gap-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-xs","text-gray-500","dark:text-gray-500","mt-2"]],template:function(e,o){e&1&&(t(0,"div",0),x(1,U,1,0,"app-loading",1)(2,K,65,12,"div",2),i()),e&2&&(a(),s("ngIf",o.loading()),a(),s("ngIf",!o.loading()))},dependencies:[D,I,_,R,T,N,M,C],encapsulation:2})};export{F as Dashboard};
