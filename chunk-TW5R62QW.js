import{a as z}from"./chunk-Y3S5ROOB.js";import"./chunk-Q2AQ2DAQ.js";import"./chunk-PT2JM3JA.js";import{a as j}from"./chunk-SJCQLIIU.js";import{a as $}from"./chunk-FQ6L6BO3.js";import{a as O,b as B,c as A}from"./chunk-TE33ORRB.js";import{f as N,h as F,k as L}from"./chunk-XWUIZVU3.js";import{Ab as E,Ba as a,Fb as C,Hb as k,Lb as P,Pb as h,Qb as R,Ra as y,Va as p,W as f,ab as c,ba as S,bb as e,ca as I,cb as t,db as g,gc as w,hc as T,ja as u,kc as M,mb as x,tb as _,ub as b,vb as D,xb as r,yb as d,zb as m}from"./chunk-VMW2IAQ2.js";var G=l=>["/drivers",l];function H(l,o){l&1&&g(0,"app-loading")}function V(l,o){if(l&1&&(e(0,"div",34)(1,"div",35)(2,"div",36),r(3),t(),e(4,"div",12)(5,"h3",37),r(6),t(),e(7,"div",38)(8,"span"),r(9),t(),e(10,"span"),r(11,"\u2022"),t(),e(12,"span"),r(13),t()()()()()),l&2){let i,s,n=o.$implicit,v=x(3);c("routerLink",k(10,G,n.Driver.driverId)),a(2),b("background-color",(i=v.teamColors())==null?null:i.primary)("color",(s=v.teamColors())==null?null:s.text),a(),m(" ",n.Driver.code," "),a(3),E(" ",n.Driver.givenName," ",n.Driver.familyName," "),a(3),d(n.Driver.nationality),a(4),m("",n.totalPoints," pts")}}function q(l,o){if(l&1&&(e(0,"app-card",31)(1,"div",32),p(2,V,14,12,"div",33),t()()),l&2){let i=x(2);a(2),c("ngForOf",i.teamDriversData())}}function J(l,o){if(l&1&&(e(0,"span",56),r(1),t()),l&2){let i=x().$implicit;a(),m(" +",i.sprintPoints," ")}}function K(l,o){if(l&1&&(e(0,"div",52)(1,"span",53)(2,"span",54),r(3),t()(),e(4,"span",48),r(5),p(6,J,2,1,"span",55),t()()),l&2){let i=o.$implicit,s=x().model;a(3),d(i.Driver.givenName),a(2),m(" ",i.points,"pts "),a(),c("ngIf",s.extra==null?null:s.extra.isSprintRace)}}function Q(l,o){if(l&1&&(e(0,"div",39)(1,"div",40)(2,"div",41),r(3),t(),e(4,"div",42),r(5),t()(),e(6,"div",43)(7,"div",44)(8,"span",45),r(9,"Points Scored:"),t(),e(10,"span",46),r(11),t()(),e(12,"div",47)(13,"span",45),r(14,"Total Points:"),t(),e(15,"span",48),r(16),t()(),g(17,"div",49),e(18,"div",50),r(19,"Driver Breakdown:"),t(),p(20,K,7,3,"div",51),t()()),l&2){let i=o.model;a(3),m("Round ",i.extra==null?null:i.extra.round),a(2),d(i.extra==null?null:i.extra.raceName),a(6),m("+",i.extra==null?null:i.extra.pointsScored),a(5),d(i.value),a(4),c("ngForOf",i.extra==null?null:i.extra.driverBreakdown)}}function U(l,o){if(l&1&&(e(0,"div",5)(1,"button",6),S(),e(2,"svg",7),g(3,"path",8),t(),r(4," Back to Teams "),t(),I(),e(5,"div",9),g(6,"div",10),e(7,"div",11)(8,"div",12)(9,"div",13)(10,"span",14),r(11),t(),e(12,"div")(13,"h1",15),r(14),t(),e(15,"p",16),r(16),t()()()(),e(17,"div",17)(18,"div",18)(19,"div",19),r(20),t(),e(21,"div",20),r(22,"Points"),t()(),e(23,"div",18)(24,"div",21),r(25),t(),e(26,"div",20),r(27,"Wins"),t()(),e(28,"div",18)(29,"div",21),r(30),t(),e(31,"div",20),r(32,"Avg/Race"),t()()()()(),e(33,"div",22),p(34,q,3,1,"app-card",23),e(35,"app-card",24),g(36,"app-line-chart",25),p(37,Q,21,5,"ng-template",null,0,P),t(),e(39,"app-card",26)(40,"div",27)(41,"div",28)(42,"div",29),r(43),t(),e(44,"div",30),r(45,"Total Points"),t()(),e(46,"div",28)(47,"div",29),r(48),t(),e(49,"div",30),r(50,"Race Wins"),t()(),e(51,"div",28)(52,"div",29),r(53),t(),e(54,"div",30),r(55,"Avg Points/Race"),t()(),e(56,"div",28)(57,"div",29),r(58),t(),e(59,"div",30),r(60,"Best Race"),t()()()()()()),l&2){let i,s=_(38),n=x();a(6),b("background-color",(i=n.teamColors())==null?null:i.primary),a(4),D("bg-yellow-500",n.teamInfo().position==="1")("text-black",n.teamInfo().position==="1")("bg-gray-400",n.teamInfo().position==="2")("text-black",n.teamInfo().position==="2")("bg-orange-600",n.teamInfo().position==="3")("text-white",n.teamInfo().position==="3")("bg-gray-800",+n.teamInfo().position>3)("text-gray-300",+n.teamInfo().position>3),a(),m(" P",n.teamInfo().position," "),a(3),m(" ",n.teamInfo().Constructor.name," "),a(2),m(" ",n.teamInfo().Constructor.nationality," "),a(4),d(n.teamInfo().points),a(5),d(n.teamInfo().wins),a(5),d(n.averagePointsPerRace),a(4),c("ngIf",n.teamDriversData().length>0),a(2),c("data",n.pointsProgressionData())("height",350)("showLegend",!1)("tooltipTemplateRef",s),a(3),c("title",C("",n.selectedSeason," Season Statistics")),a(4),d(n.teamInfo().points),a(5),d(n.teamInfo().wins),a(5),d(n.averagePointsPerRace),a(5),d(n.bestRace)}}function X(l,o){l&1&&(e(0,"div",57)(1,"div",58),r(2,"\u{1F3C1}"),t(),e(3,"h2",59),r(4,"Team Not Found"),t(),e(5,"p",60),r(6,"The team you're looking for doesn't exist."),t(),e(7,"button",61),r(8," Back to Teams "),t()())}var W=class l{apiService=f(A);route=f(N);seasonService=f(j);selectedSeason=this.seasonService.selectedSeason();constructorId=u("");teamInfo=u(null);raceResults=u([]);loading=u(!1);teamColors=h(()=>this.constructorId()?$(this.constructorId()):null);pointsProgressionData=h(()=>!this.raceResults().length||!this.teamInfo()?[]:[{name:this.teamInfo().Constructor.name,series:this.raceResults().map(o=>({name:`R${o.round}`,value:o.cumulativePoints,extra:{round:o.round,raceName:o.raceName,pointsScored:o.totalPoints,isSprintRace:o.sprintResults.length>0,driverBreakdown:this.apiService.getDriverBreakDownForRace(o)}}))}]);teamDriversData=h(()=>{let o=this.raceResults();if(!o.length||!this.teamInfo())return[];let i=new Map;return o.forEach(s=>{this.apiService.getDriverBreakDownForRace(s).forEach(n=>{console.log("Driver aggregation:",i),i.has(n.Driver.driverId)||i.set(n.Driver.driverId,{Driver:n.Driver,points:0,sprintPoints:0,totalPoints:0});let v=i.get(n.Driver.driverId);v.points+=n.points,v.sprintPoints+=n.sprintPoints,v.totalPoints+=n.points+n.sprintPoints})}),console.log("Driver aggregation:",i),Array.from(i.values())});constructor(){this.route.params.subscribe(o=>{this.constructorId.set(o.id),R(()=>{this.selectedSeason=this.seasonService.selectedSeason(),this.loadTeamData(this.seasonService.selectedSeason())})})}loadTeamData(o){this.apiService.getConstructorStandings(o).subscribe({next:i=>{let s=i?.ConstructorStandings?.find(n=>n.Constructor.constructorId===this.constructorId());this.teamInfo.set(s),s?this.loadRaceResults(o):this.loading.set(!1)},error:i=>{console.error("Error loading team:",i),this.loading.set(!1)}})}loadRaceResults(o){this.apiService.getConstructorRaceResults(this.constructorId(),o).subscribe({next:i=>{this.raceResults.set(i),this.loading.set(!1)},error:i=>{console.error("Error loading race results:",i),this.loading.set(!1)}})}get averagePointsPerRace(){if(!this.teamInfo())return 0;let o=parseInt(this.teamInfo().points);return parseFloat((o/24).toFixed(1))}get bestRace(){return this.raceResults().length?Math.max(...this.raceResults().map(o=>o.points)):0}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=y({type:l,selectors:[["app-constructors-detail"]],decls:4,vars:3,consts:[["teamProgressionTooltip",""],[1,"max-w-7xl","mx-auto"],[4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"space-y-6"],["routerLink","/constructors",1,"flex","items-center","gap-2","text-f1-accent","hover:text-f1-accent/80","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"bg-gradient-to-r","from-f1-primary","to-f1-surface","rounded-2xl","p-8","border","border-gray-800","relative","overflow-hidden"],[1,"absolute","top-0","left-0","w-2","h-full"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-6","ml-4"],[1,"flex-1"],[1,"flex","items-center","gap-4","mb-4"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-full","text-2xl","font-bold"],[1,"text-4xl","font-bold","text-black","dark:text-white"],[1,"text-gray-400","mt-1"],[1,"grid","grid-cols-3","gap-4"],[1,"rounded-lg","p-4","text-center","bg-gray-100","text-gray-900","dark:bg-gray-900","dark:text-gray-100"],[1,"text-3xl","font-bold","text-f1-accent"],[1,"text-xs","text-gray-400","mt-1"],[1,"text-3xl","font-bold","text-black","dark:text-white"],[1,"grid","grid-cols-1","gap-6"],["title","Driver Lineup",4,"ngIf"],["title","Season Points Progression"],["xAxisLabel","Race","yAxisLabel","Cumulative Points",3,"data","height","showLegend","tooltipTemplateRef"],[3,"title"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],[1,"text-center"],[1,"text-4xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400"],["title","Driver Lineup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 rounded-lg p-4 border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 transition-all cursor-pointer hover:transform hover:scale-105",3,"routerLink",4,"ngFor","ngForOf"],[1,"bg-gray-100","text-gray-900","dark:bg-gray-900","dark:text-gray-100","rounded-lg","p-4","border","border-gray-200","dark:border-gray-800","hover:border-gray-300","dark:hover:border-gray-700","transition-all","cursor-pointer","hover:transform","hover:scale-105",3,"routerLink"],[1,"flex","items-center","gap-4"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center","text-xl","font-bold"],[1,"text-black","dark:text-white","font-bold"],[1,"flex","items-center","gap-3","text-sm","text-gray-400","mt-1"],[1,"custom-tooltip"],[1,"tooltip-header"],[1,"round"],[1,"race-name"],[1,"tooltip-content"],[1,"tooltip-row"],[1,"tooltip-label"],[1,"tooltip-value","points"],[1,"tooltip-row","total"],[1,"tooltip-value"],[1,"tooltip-divider"],[1,"tooltip-section-title"],["class","tooltip-row driver-row",4,"ngFor","ngForOf"],[1,"tooltip-row","driver-row"],[1,"tooltip-label","driver-name"],[1,"driver-badge"],["class","sprint-points",4,"ngIf"],[1,"sprint-points"],[1,"text-center","py-12"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400","mb-6"],["routerLink","/constructors",1,"bg-f1-accent","text-black","px-6","py-3","rounded-lg","font-medium","hover:bg-f1-accent/80","transition-colors"]],template:function(i,s){i&1&&(e(0,"div",1),p(1,H,1,0,"app-loading",2)(2,U,61,35,"div",3)(3,X,9,0,"div",4),t()),i&2&&(a(),c("ngIf",s.loading()),a(),c("ngIf",!s.loading()&&s.teamInfo()),a(),c("ngIf",!s.loading()&&!s.teamInfo()))},dependencies:[M,w,T,L,F,O,B,z],styles:[".sprint-points[_ngcontent-%COMP%]{margin-left:4px;opacity:.7;font-size:.85em}.tooltip-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding-bottom:6px;margin-bottom:6px;border-bottom:1px solid rgba(255,255,255,.15)}.tooltip-header[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;opacity:.7;text-transform:uppercase}.tooltip-header[_ngcontent-%COMP%]   .race-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;line-height:1.2}"]})};export{W as ConstructorsDetail};
