import{a as G,b as H,c as V,d as W}from"./chunk-3M7XONLC.js";import"./chunk-PT2JM3JA.js";import{a as Y,b as X,c as $}from"./chunk-6FKWHFSV.js";import{f as B,h as O,k as j,l as z}from"./chunk-MSHCLZU5.js";import{Ab as f,Ba as a,Gb as N,Kb as S,Ob as I,Pb as T,Ra as b,Va as c,W as h,ab as p,ba as _,bb as e,ca as R,cb as t,db as v,dc as F,ec as D,fc as M,hb as k,hc as w,ib as C,ja as u,jb as L,mb as y,tb as P,ub as A,vb as g,xb as o,yb as m,zb as d}from"./chunk-XH6OYFID.js";var U=s=>({model:s});function Z(s,n){s&1&&L(0)}function ee(s,n){if(s&1&&c(0,Z,1,0,"ng-container",4),s&2){let i=n.model,l=y(2);p("ngTemplateOutlet",l.tooltipTemplateRef)("ngTemplateOutletContext",N(2,U,i))}}function te(s,n){s&1&&(k(0),c(1,ee,1,4,"ng-template",null,0,S),C())}var E=class s{data=[];xAxisLabel="";yAxisLabel="";showLegend=!0;height=300;customColors=[];tooltipTemplateRef;showXAxis=!0;showYAxis=!0;gradient=!1;showXAxisLabel=!0;showYAxisLabel=!0;timeline=!0;autoScale=!0;colorScheme={name:"custom",selectable:!0,group:G.Ordinal,domain:["#00f0ff","#dc0000","#ff8700","#0090ff","#00d2be"]};static \u0275fac=function(i){return new(i||s)};static \u0275cmp=b({type:s,selectors:[["app-line-chart"]],inputs:{data:"data",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",showLegend:"showLegend",height:"height",customColors:"customColors",tooltipTemplateRef:"tooltipTemplateRef"},decls:3,vars:16,consts:[["tooltipTemplate",""],[1,"chart-container"],[3,"results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","timeline","autoScale","scheme","customColors","showGridLines"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,l){i&1&&(e(0,"div",1)(1,"ngx-charts-line-chart",2),c(2,te,3,0,"ng-container",3),t()()),i&2&&(A("height",l.height,"px"),a(),p("results",l.data)("xAxis",l.showXAxis)("yAxis",l.showYAxis)("legend",l.showLegend)("showXAxisLabel",l.showXAxisLabel)("showYAxisLabel",l.showYAxisLabel)("xAxisLabel",l.xAxisLabel)("yAxisLabel",l.yAxisLabel)("timeline",l.timeline)("autoScale",l.autoScale)("scheme",l.colorScheme)("customColors",l.customColors)("showGridLines",!1),a(),p("ngIf",l.tooltipTemplateRef))},dependencies:[w,D,M,V,H],styles:["[_nghost-%COMP%]{display:block;width:100%}.chart-container[_ngcontent-%COMP%]{width:100%}  .custom-tooltip{background:#fff;border:1px solid #e5e7eb;border-radius:6px;padding:10px 12px;box-shadow:0 2px 8px #0000001a;min-width:180px}  .dark .custom-tooltip{background:#1f2937;border-color:#374151;box-shadow:0 2px 8px #0006}  .custom-tooltip .tooltip-header{color:#111827;font-size:13px;font-weight:600;margin-bottom:6px;padding-bottom:6px;border-bottom:1px solid #e5e7eb}  .dark .custom-tooltip .tooltip-header{color:#f9fafb;border-bottom-color:#374151}  .custom-tooltip .tooltip-content{display:flex;flex-direction:column;gap:4px}  .custom-tooltip .tooltip-row{display:flex;justify-content:space-between;align-items:center;font-size:11px;line-height:1.4}  .custom-tooltip .tooltip-row.total{margin-top:4px;padding-top:6px;border-top:1px solid #e5e7eb;font-weight:600}  .dark .custom-tooltip .tooltip-row.total{border-top-color:#374151}  .custom-tooltip .tooltip-label{color:#6b7280}  .dark .custom-tooltip .tooltip-label{color:#9ca3af}  .custom-tooltip .tooltip-value{color:#111827;font-weight:500}  .dark .custom-tooltip .tooltip-value{color:#f9fafb}  .custom-tooltip .tooltip-value.position{padding:1px 6px;border-radius:3px;font-weight:600;font-size:10px;background:#e5e7eb;color:#374151}  .dark .custom-tooltip .tooltip-value.position{background:#374151;color:#d1d5db}  .custom-tooltip .tooltip-value.position.position-1{background:#fbbf24;color:#78350f}  .dark .custom-tooltip .tooltip-value.position.position-1{background:#fbbf24;color:#78350f}  .custom-tooltip .tooltip-value.position.position-2{background:#d1d5db;color:#1f2937}  .dark .custom-tooltip .tooltip-value.position.position-2{background:#d1d5db;color:#1f2937}  .custom-tooltip .tooltip-value.position.position-3{background:#fb923c;color:#7c2d12}  .dark .custom-tooltip .tooltip-value.position.position-3{background:#fb923c;color:#7c2d12}  .custom-tooltip .tooltip-value.points{color:#059669;font-weight:600}  .dark .custom-tooltip .tooltip-value.points{color:#34d399}  ngx-tooltip-content:has(.custom-tooltip),   .ngx-charts-tooltip-content:has(.custom-tooltip){background:transparent!important}"]})};function ie(s,n){s&1&&v(0,"app-loading")}function oe(s,n){if(s&1&&(e(0,"div",50)(1,"div",51)(2,"strong"),o(3),t()(),e(4,"div",52)(5,"div",53)(6,"span",54),o(7,"Round:"),t(),e(8,"span",55),o(9),t()(),e(10,"div",53)(11,"span",54),o(12,"Position:"),t(),e(13,"span",56),o(14),t()(),e(15,"div",53)(16,"span",54),o(17,"Points Scored:"),t(),e(18,"span",57),o(19),t()(),e(20,"div",58)(21,"span",54),o(22,"Total Points:"),t(),e(23,"span",55),o(24),t()()()()),s&2){let i=n.model;a(3),m(i.extra==null?null:i.extra.raceName),a(6),m(i.extra==null?null:i.extra.round),a(4),g("position-1",(i.extra==null?null:i.extra.position)===1)("position-2",(i.extra==null?null:i.extra.position)===2)("position-3",(i.extra==null?null:i.extra.position)===3),a(),d(" P",i.extra==null?null:i.extra.position," "),a(5),d("+",i.extra==null?null:i.extra.pointsScored),a(5),m(i.value)}}function ne(s,n){if(s&1&&(e(0,"tr",59)(1,"td",60),o(2),t(),e(3,"td",61),o(4),t(),e(5,"td",62)(6,"span",63),o(7),t()(),e(8,"td",64),o(9),t()()),s&2){let i=n.$implicit;a(2),d(" R",i.round," "),a(2),d(" ",i.raceName," "),a(2),g("bg-yellow-500",i.position===1)("text-black",i.position===1)("bg-gray-400",i.position===2)("text-black",i.position===2)("bg-orange-600",i.position===3)("text-white",i.position===3)("bg-gray-800",i.position>3&&i.position<=10)("text-gray-300",i.position>3&&i.position<=10)("bg-red-900",i.position>20)("text-red-300",i.position>20),a(),d(" ",i.position>20?"DNF":i.position," "),a(),g("text-f1-accent",i.points>0)("text-gray-500",i.points===0),a(),d(" ",i.totalPoints," ")}}function ae(s,n){if(s&1&&(e(0,"div",5)(1,"button",6),_(),e(2,"svg",7),v(3,"path",8),t(),o(4," Back to Drivers "),t(),R(),e(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"span",13),o(10),t(),e(11,"div")(12,"div",14),o(13),t(),e(14,"h1",15),o(15),t(),e(16,"p",16),o(17),t()()()(),e(18,"div",17)(19,"div",18)(20,"div",19),o(21),t(),e(22,"div",20),o(23,"Points"),t()(),e(24,"div",18)(25,"div",21),o(26),t(),e(27,"div",20),o(28,"Wins"),t()(),e(29,"div",18)(30,"div",21),o(31),t(),e(32,"div",20),o(33,"Age"),t()()()()(),e(34,"div",22)(35,"div",23)(36,"app-card",24),v(37,"app-line-chart",25),c(38,oe,25,11,"ng-template",null,0,S),t(),e(40,"app-card",26)(41,"div",27)(42,"div",28)(43,"div",29),o(44),t(),e(45,"div",30),o(46,"Podiums"),t()(),e(47,"div",28)(48,"div",29),o(49),t(),e(50,"div",30),o(51,"Points Finishes"),t()(),e(52,"div",28)(53,"div",29),o(54),t(),e(55,"div",30),o(56,"Best Finish"),t()(),e(57,"div",28)(58,"div",29),o(59),t(),e(60,"div",30),o(61,"Avg Position"),t()()()()(),e(62,"app-card",31)(63,"div",32)(64,"div",33)(65,"span",34),o(66,"Full Name"),t(),e(67,"span",35),o(68),t()(),e(69,"div",33)(70,"span",34),o(71,"Driver Code"),t(),e(72,"span",35),o(73),t()(),e(74,"div",33)(75,"span",34),o(76,"Car Number"),t(),e(77,"span",35),o(78),t()(),e(79,"div",33)(80,"span",34),o(81,"Nationality"),t(),e(82,"span",35),o(83),t()(),e(84,"div",33)(85,"span",34),o(86,"Date of Birth"),t(),e(87,"span",35),o(88),t()(),e(89,"div",33)(90,"span",34),o(91,"Current Team"),t(),e(92,"span",35),o(93),t()(),e(94,"div",36)(95,"span",34),o(96,"Championship Position"),t(),e(97,"span",37),o(98),t()()()()(),e(99,"div",38)(100,"app-card",39),v(101,"app-bar-chart",40),t(),e(102,"app-card",41)(103,"div",42)(104,"table",43)(105,"thead",44)(106,"tr")(107,"th",45),o(108,"Round"),t(),e(109,"th",45),o(110,"Race"),t(),e(111,"th",46),o(112,"Pos"),t(),e(113,"th",47),o(114,"Points"),t()()(),e(115,"tbody",48),c(116,ne,10,28,"tr",49),t()()()()()()),s&2){let i,l,x=P(39),r=y();a(9),g("bg-yellow-500",r.driverInfo().position==="1")("text-black",r.driverInfo().position==="1")("bg-gray-400",r.driverInfo().position==="2")("text-black",r.driverInfo().position==="2")("bg-orange-600",r.driverInfo().position==="3")("text-white",r.driverInfo().position==="3")("bg-gray-800",r.driverInfo().position>"3")("text-gray-300",r.driverInfo().position>"3"),a(),d(" P",r.driverInfo().position," "),a(3),f(" #",r.driverInfo().Driver.permanentNumber," \u2022 ",r.driverInfo().Driver.code," "),a(2),f(" ",r.driverInfo().Driver.givenName," ",r.driverInfo().Driver.familyName," "),a(2),f(" ",(i=r.driverInfo().Constructors[0])==null?null:i.name," \u2022 ",r.driverInfo().Driver.nationality," "),a(4),m(r.driverInfo().points),a(5),m(r.driverInfo().wins),a(5),m(r.calculateAge(r.driverInfo().Driver.dateOfBirth)),a(6),p("data",r.pointsProgressionData())("height",300)("showLegend",!1)("tooltipTemplateRef",x),a(7),m(r.podiums),a(5),m(r.pointsFinishes),a(5),m(r.bestFinish),a(5),m(r.averagePosition),a(9),f(" ",r.driverInfo().Driver.givenName," ",r.driverInfo().Driver.familyName," "),a(5),d(" ",r.driverInfo().Driver.code," "),a(5),d(" #",r.driverInfo().Driver.permanentNumber," "),a(5),d(" ",r.driverInfo().Driver.nationality," "),a(5),d(" ",r.driverInfo().Driver.dateOfBirth," "),a(5),d(" ",(l=r.driverInfo().Constructors[0])==null?null:l.name," "),a(5),d(" P",r.driverInfo().position," "),a(3),p("data",r.pointsScoredByRaceData())("height",300)("showLegend",!1),a(),p("noPadding",!0),a(14),p("ngForOf",r.raceResults())}}function re(s,n){s&1&&(e(0,"div",65)(1,"div",66),o(2,"\u{1F3CE}\uFE0F"),t(),e(3,"h2",67),o(4,"Driver Not Found"),t(),e(5,"p",68),o(6,"The driver you're looking for doesn't exist."),t(),e(7,"button",69),o(8," Back to Drivers "),t()())}var q=class s{apiService=h($);route=h(B);seasonService=h(z);driverId=u("");driverInfo=u(null);raceResults=u([]);loading=u(!0);pointsProgressionData=I(()=>!this.raceResults().length||!this.driverInfo()?[]:[{name:this.driverInfo().Driver.code,series:this.raceResults().map(n=>({name:`R${n.round}`,value:n.cumulativePoints,extra:{raceName:n.raceName,position:+n.position,pointsScored:+n.totalPoints,round:n.round}}))}]);positionsByRaceData=I(()=>this.raceResults().length?this.raceResults().map(n=>({name:`R${n.round}`,value:n.position,extra:{raceName:n.raceName,points:n.totalPoints}})):[]);pointsScoredByRaceData=I(()=>this.raceResults().length?this.raceResults().map(n=>({name:`R${n.round}`,value:n.totalPoints,extra:{raceName:n.raceName,position:n.position}})):[]);constructor(){this.route.params.subscribe(n=>{this.driverId.set(n.id),T(()=>{this.fetchDriverInfo(this.seasonService.selectedSeason())})})}fetchDriverInfo(n){this.apiService.getDriverStandings(n).subscribe({next:i=>{let l=i?.DriverStandings?.find(x=>x.Driver.driverId===this.driverId());this.driverInfo.set(l),this.loading.set(!1),l&&this.loadRaceResults()},error:i=>{console.error("Error loading driver:",i),this.loading.set(!1)}})}loadRaceResults(){this.loading.set(!0),this.apiService.getDriverRaceResults(this.driverId(),this.seasonService.selectedSeason()).subscribe({next:n=>{this.raceResults.set(n),this.loading.set(!1)},error:n=>{console.error("Error loading race results:",n),this.loading.set(!1)}})}calculateAge(n){let i=new Date,l=new Date(n),x=i.getFullYear()-l.getFullYear(),r=i.getMonth()-l.getMonth();return(r<0||r===0&&i.getDate()<l.getDate())&&x--,x}get bestFinish(){return this.raceResults().length?Math.min(...this.raceResults().map(n=>n.position)):0}get podiums(){return this.raceResults().filter(n=>n.position<=3).length}get pointsFinishes(){return this.raceResults().filter(n=>n.position<=10).length}get averagePosition(){if(!this.raceResults().length)return 0;let n=this.raceResults().reduce((i,l)=>i+l.position,0);return parseFloat((n/this.raceResults().length).toFixed(2))}get dnfCount(){return this.raceResults().filter(n=>n.position>20).length}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=b({type:s,selectors:[["app-driver-detail"]],decls:4,vars:3,consts:[["pointsTooltip",""],[1,"max-w-7xl","mx-auto"],[4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"space-y-6"],["routerLink","/drivers",1,"flex","items-center","gap-2","text-f1-accent","hover:text-f1-accent/80","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"bg-gradient-to-r","from-f1-primary","to-f1-surface","rounded-2xl","p-8","border","border-gray-800"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-6"],[1,"flex-1"],[1,"flex","items-center","gap-4","mb-4"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-full","text-2xl","font-bold"],[1,"text-f1-accent","font-mono","text-sm","mb-1"],[1,"text-4xl","font-bold","text-black","dark:text-white"],[1,"text-gray-400","mt-1"],[1,"grid","grid-cols-3","gap-4"],[1,"rounded-lg","p-4","text-center","bg-gray-100","text-gray-900","dark:bg-gray-900","dark:text-gray-100"],[1,"text-3xl","font-bold","text-f1-accent"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],[1,"text-3xl","font-bold"],[1,"grid","grid-cols-1","lg:grid-cols-[4fr_2fr]","gap-6"],[1,"flex","flex-col","gap-6"],["title","Season Points Progression"],["xAxisLabel","Race","yAxisLabel","Cumulative Points",3,"data","height","showLegend","tooltipTemplateRef"],["title","2024 Season Statistics"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],[1,"text-center"],[1,"text-4xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400","text-sm"],["title","Driver Information"],[1,"space-y-4"],[1,"flex","justify-between","py-3","border-b","border-gray-800"],[1,"text-gray-400"],[1,"font-medium","text-black","dark:text-white"],[1,"flex","justify-between","py-3"],[1,"text-f1-accent","font-bold","text-xl"],[1,"grid","grid-cols-1","gap-6"],["title","Points Scored Per Race"],["xAxisLabel","Race","yAxisLabel","Points",3,"data","height","showLegend"],["title","All Race Results",3,"noPadding"],[1,"overflow-x-auto","max-h-96"],[1,"w-full"],[1,"bg-gray-900","sticky","top-0"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-400","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-400","uppercase"],[1,"px-4","py-3","text-right","text-xs","font-medium","text-gray-400","uppercase"],[1,"divide-y","divide-gray-800"],["class","hover:bg-gray-200 dark:hover:bg-gray-900 transition-colors",4,"ngFor","ngForOf"],[1,"custom-tooltip"],[1,"tooltip-header"],[1,"tooltip-content"],[1,"tooltip-row"],[1,"tooltip-label"],[1,"tooltip-value"],[1,"tooltip-value","position"],[1,"tooltip-value","points"],[1,"tooltip-row","total"],[1,"hover:bg-gray-200","dark:hover:bg-gray-900","transition-colors"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-gray-400"],[1,"px-4","py-3","text-sm","text-black","dark:text-white"],[1,"px-4","py-3","whitespace-nowrap","text-center"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-bold"],[1,"px-4","py-3","whitespace-nowrap","text-right","text-sm","font-bold"],[1,"text-center","py-12"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400","mb-6"],["routerLink","/drivers",1,"bg-f1-accent","text-black","px-6","py-3","rounded-lg","font-medium","hover:bg-f1-accent/80","transition-colors"]],template:function(i,l){i&1&&(e(0,"div",1),c(1,ie,1,0,"app-loading",2)(2,ae,117,47,"div",3)(3,re,9,0,"div",4),t()),i&2&&(a(),p("ngIf",l.loading()),a(),p("ngIf",!l.loading()&&l.driverInfo()),a(),p("ngIf",!l.loading()&&!l.driverInfo()))},dependencies:[w,F,D,j,O,Y,X,E,W],encapsulation:2})};export{q as DriverDetail};
