import{a as j}from"./chunk-UUQAJQVE.js";import{a as O}from"./chunk-7W6Y4B3H.js";import"./chunk-YZ2OD4UX.js";import"./chunk-PT2JM3JA.js";import{a as L,b as T,c as B}from"./chunk-67BDTVMV.js";import{f as F,h as C,k as M,l as A}from"./chunk-MSHCLZU5.js";import{Ab as u,Ba as a,Eb as R,Kb as w,Ob as b,Pb as P,Ra as I,Va as h,W as f,ab as m,ba as y,bb as e,ca as S,cb as t,db as x,dc as k,ec as N,hc as _,ja as v,mb as D,tb as E,vb as g,xb as n,yb as p,zb as s}from"./chunk-XH6OYFID.js";function Y(d,r){d&1&&x(0,"app-loading")}function G(d,r){if(d&1&&(e(0,"div",50)(1,"div",51)(2,"strong"),n(3),t()(),e(4,"div",52)(5,"div",53)(6,"span",54),n(7,"Round:"),t(),e(8,"span",55),n(9),t()(),e(10,"div",53)(11,"span",54),n(12,"Position:"),t(),e(13,"span",56),n(14),t()(),e(15,"div",53)(16,"span",54),n(17,"Points Scored:"),t(),e(18,"span",57),n(19),t()(),e(20,"div",58)(21,"span",54),n(22,"Total Points:"),t(),e(23,"span",55),n(24),t()()()()),d&2){let i=r.model;a(3),p(i.extra==null?null:i.extra.raceName),a(6),p(i.extra==null?null:i.extra.round),a(4),g("position-1",(i.extra==null?null:i.extra.position)===1)("position-2",(i.extra==null?null:i.extra.position)===2)("position-3",(i.extra==null?null:i.extra.position)===3),a(),s(" P",i.extra==null?null:i.extra.position," "),a(5),s("+",i.extra==null?null:i.extra.pointsScored),a(5),p(i.value)}}function H(d,r){if(d&1&&(e(0,"tr",59)(1,"td",60),n(2),t(),e(3,"td",61),n(4),t(),e(5,"td",62)(6,"span",63),n(7),t()(),e(8,"td",64),n(9),t()()),d&2){let i=r.$implicit;a(2),s(" R",i.round," "),a(2),s(" ",i.raceName," "),a(2),g("bg-yellow-500",i.position===1)("text-black",i.position===1)("bg-gray-400",i.position===2)("text-black",i.position===2)("bg-orange-600",i.position===3)("text-white",i.position===3)("bg-gray-800",i.position>3&&i.position<=10)("text-gray-300",i.position>3&&i.position<=10)("bg-red-900",i.position>20)("text-red-300",i.position>20),a(),s(" ",i.position>20?"DNF":i.position," "),a(),g("text-f1-accent",i.points>0)("text-gray-500",i.points===0),a(),s(" ",i.totalPoints," ")}}function V(d,r){if(d&1&&(e(0,"div",5)(1,"button",6),y(),e(2,"svg",7),x(3,"path",8),t(),n(4," Back to Drivers "),t(),S(),e(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"span",13),n(10),t(),e(11,"div")(12,"div",14),n(13),t(),e(14,"h1",15),n(15),t(),e(16,"p",16),n(17),t()()()(),e(18,"div",17)(19,"div",18)(20,"div",19),n(21),t(),e(22,"div",20),n(23,"Points"),t()(),e(24,"div",18)(25,"div",21),n(26),t(),e(27,"div",20),n(28,"Wins"),t()(),e(29,"div",18)(30,"div",21),n(31),t(),e(32,"div",20),n(33,"Age"),t()()()()(),e(34,"div",22)(35,"div",23)(36,"app-card",24),x(37,"app-line-chart",25),h(38,G,25,11,"ng-template",null,0,w),t(),e(40,"app-card",26)(41,"div",27)(42,"div",28)(43,"div",29),n(44),t(),e(45,"div",30),n(46,"Podiums"),t()(),e(47,"div",28)(48,"div",29),n(49),t(),e(50,"div",30),n(51,"Points Finishes"),t()(),e(52,"div",28)(53,"div",29),n(54),t(),e(55,"div",30),n(56,"Best Finish"),t()(),e(57,"div",28)(58,"div",29),n(59),t(),e(60,"div",30),n(61,"Avg Position"),t()()()()(),e(62,"app-card",31)(63,"div",32)(64,"div",33)(65,"span",34),n(66,"Full Name"),t(),e(67,"span",35),n(68),t()(),e(69,"div",33)(70,"span",34),n(71,"Driver Code"),t(),e(72,"span",35),n(73),t()(),e(74,"div",33)(75,"span",34),n(76,"Car Number"),t(),e(77,"span",35),n(78),t()(),e(79,"div",33)(80,"span",34),n(81,"Nationality"),t(),e(82,"span",35),n(83),t()(),e(84,"div",33)(85,"span",34),n(86,"Date of Birth"),t(),e(87,"span",35),n(88),t()(),e(89,"div",33)(90,"span",34),n(91,"Current Team"),t(),e(92,"span",35),n(93),t()(),e(94,"div",36)(95,"span",34),n(96,"Championship Position"),t(),e(97,"span",37),n(98),t()()()()(),e(99,"div",38)(100,"app-card",39),x(101,"app-bar-chart",40),t(),e(102,"app-card",41)(103,"div",42)(104,"table",43)(105,"thead",44)(106,"tr")(107,"th",45),n(108,"Round"),t(),e(109,"th",45),n(110,"Race"),t(),e(111,"th",46),n(112,"Pos"),t(),e(113,"th",47),n(114,"Points"),t()()(),e(115,"tbody",48),h(116,H,10,28,"tr",49),t()()()()()()),d&2){let i,l,c=E(39),o=D();a(9),g("bg-yellow-500",o.driverInfo().position==="1")("text-black",o.driverInfo().position==="1")("bg-gray-400",o.driverInfo().position==="2")("text-black",o.driverInfo().position==="2")("bg-orange-600",o.driverInfo().position==="3")("text-white",o.driverInfo().position==="3")("bg-gray-800",o.driverInfo().position>"3")("text-gray-300",o.driverInfo().position>"3"),a(),s(" P",o.driverInfo().position," "),a(3),u(" #",o.driverInfo().Driver.permanentNumber," \u2022 ",o.driverInfo().Driver.code," "),a(2),u(" ",o.driverInfo().Driver.givenName," ",o.driverInfo().Driver.familyName," "),a(2),u(" ",(i=o.driverInfo().Constructors[0])==null?null:i.name," \u2022 ",o.driverInfo().Driver.nationality," "),a(4),p(o.driverInfo().points),a(5),p(o.driverInfo().wins),a(5),p(o.calculateAge(o.driverInfo().Driver.dateOfBirth)),a(6),m("data",o.pointsProgressionData())("height",300)("showLegend",!1)("tooltipTemplateRef",c),a(3),m("title",R("",o.selectedSeason," Season Statistics")),a(4),p(o.podiums),a(5),p(o.pointsFinishes),a(5),p(o.bestFinish),a(5),p(o.averagePosition),a(9),u(" ",o.driverInfo().Driver.givenName," ",o.driverInfo().Driver.familyName," "),a(5),s(" ",o.driverInfo().Driver.code," "),a(5),s(" #",o.driverInfo().Driver.permanentNumber," "),a(5),s(" ",o.driverInfo().Driver.nationality," "),a(5),s(" ",o.driverInfo().Driver.dateOfBirth," "),a(5),s(" ",(l=o.driverInfo().Constructors[0])==null?null:l.name," "),a(5),s(" P",o.driverInfo().position," "),a(3),m("data",o.pointsScoredByRaceData())("height",300)("showLegend",!1),a(),m("noPadding",!0),a(14),m("ngForOf",o.raceResults())}}function W(d,r){d&1&&(e(0,"div",65)(1,"div",66),n(2,"\u{1F3CE}\uFE0F"),t(),e(3,"h2",67),n(4,"Driver Not Found"),t(),e(5,"p",68),n(6,"The driver you're looking for doesn't exist."),t(),e(7,"button",69),n(8," Back to Drivers "),t()())}var $=class d{apiService=f(B);route=f(F);seasonService=f(A);selectedSeason=this.seasonService.selectedSeason();driverId=v("");driverInfo=v(null);raceResults=v([]);loading=v(!0);pointsProgressionData=b(()=>!this.raceResults().length||!this.driverInfo()?[]:[{name:this.driverInfo().Driver.code,series:this.raceResults().map(r=>({name:`R${r.round}`,value:r.cumulativePoints,extra:{raceName:r.raceName,position:+r.position,pointsScored:+r.totalPoints,round:r.round}}))}]);positionsByRaceData=b(()=>this.raceResults().length?this.raceResults().map(r=>({name:`R${r.round}`,value:r.position,extra:{raceName:r.raceName,points:r.totalPoints}})):[]);pointsScoredByRaceData=b(()=>this.raceResults().length?this.raceResults().map(r=>({name:`R${r.round}`,value:r.totalPoints,extra:{raceName:r.raceName,position:r.position}})):[]);constructor(){this.route.params.subscribe(r=>{this.driverId.set(r.id),P(()=>{this.selectedSeason=this.seasonService.selectedSeason(),this.fetchDriverInfo(this.seasonService.selectedSeason())})})}fetchDriverInfo(r){this.apiService.getDriverStandings(r).subscribe({next:i=>{let l=i?.DriverStandings?.find(c=>c.Driver.driverId===this.driverId());this.driverInfo.set(l),this.loading.set(!1),l&&this.loadRaceResults(r)},error:i=>{console.error("Error loading driver:",i),this.loading.set(!1)}})}loadRaceResults(r){this.loading.set(!0),this.apiService.getDriverRaceResults(this.driverId(),r).subscribe({next:i=>{this.raceResults.set(i),this.loading.set(!1)},error:i=>{console.error("Error loading race results:",i),this.loading.set(!1)}})}calculateAge(r){let i=new Date,l=new Date(r),c=i.getFullYear()-l.getFullYear(),o=i.getMonth()-l.getMonth();return(o<0||o===0&&i.getDate()<l.getDate())&&c--,c}get bestFinish(){return this.raceResults().length?Math.min(...this.raceResults().map(r=>r.position)):0}get podiums(){return this.raceResults().filter(r=>r.position<=3).length}get pointsFinishes(){return this.raceResults().filter(r=>r.position<=10).length}get averagePosition(){if(!this.raceResults().length)return 0;let r=this.raceResults().reduce((i,l)=>i+l.position,0);return parseFloat((r/this.raceResults().length).toFixed(2))}get dnfCount(){return this.raceResults().filter(r=>r.position>20).length}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=I({type:d,selectors:[["app-driver-detail"]],decls:4,vars:3,consts:[["pointsTooltip",""],[1,"max-w-7xl","mx-auto"],[4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"space-y-6"],["routerLink","/drivers",1,"flex","items-center","gap-2","text-f1-accent","hover:text-f1-accent/80","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"bg-gradient-to-r","from-f1-primary","to-f1-surface","rounded-2xl","p-8","border","border-gray-800"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between","gap-6"],[1,"flex-1"],[1,"flex","items-center","gap-4","mb-4"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-full","text-2xl","font-bold"],[1,"text-f1-accent","font-mono","text-sm","mb-1"],[1,"text-4xl","font-bold","text-black","dark:text-white"],[1,"text-gray-400","mt-1"],[1,"grid","grid-cols-3","gap-4"],[1,"rounded-lg","p-4","text-center","bg-gray-100","text-gray-900","dark:bg-gray-900","dark:text-gray-100"],[1,"text-3xl","font-bold","text-f1-accent"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],[1,"text-3xl","font-bold"],[1,"grid","grid-cols-1","lg:grid-cols-[4fr_2fr]","gap-6"],[1,"flex","flex-col","gap-6"],["title","Season Points Progression"],["xAxisLabel","Race","yAxisLabel","Cumulative Points",3,"data","height","showLegend","tooltipTemplateRef"],[3,"title"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],[1,"text-center"],[1,"text-4xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400","text-sm"],["title","Driver Information"],[1,"space-y-4"],[1,"flex","justify-between","py-3","border-b","border-gray-800"],[1,"text-gray-400"],[1,"font-medium","text-black","dark:text-white"],[1,"flex","justify-between","py-3"],[1,"text-f1-accent","font-bold","text-xl"],[1,"grid","grid-cols-1","gap-6"],["title","Points Scored Per Race"],["xAxisLabel","Race","yAxisLabel","Points",3,"data","height","showLegend"],["title","All Race Results",3,"noPadding"],[1,"overflow-x-auto","max-h-96"],[1,"w-full"],[1,"bg-gray-900","sticky","top-0"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-400","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-400","uppercase"],[1,"px-4","py-3","text-right","text-xs","font-medium","text-gray-400","uppercase"],[1,"divide-y","divide-gray-800"],["class","hover:bg-gray-200 dark:hover:bg-gray-900 transition-colors",4,"ngFor","ngForOf"],[1,"custom-tooltip"],[1,"tooltip-header"],[1,"tooltip-content"],[1,"tooltip-row"],[1,"tooltip-label"],[1,"tooltip-value"],[1,"tooltip-value","position"],[1,"tooltip-value","points"],[1,"tooltip-row","total"],[1,"hover:bg-gray-200","dark:hover:bg-gray-900","transition-colors"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-gray-400"],[1,"px-4","py-3","text-sm","text-black","dark:text-white"],[1,"px-4","py-3","whitespace-nowrap","text-center"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-bold"],[1,"px-4","py-3","whitespace-nowrap","text-right","text-sm","font-bold"],[1,"text-center","py-12"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-bold","text-black","dark:text-white","mb-2"],[1,"text-gray-400","mb-6"],["routerLink","/drivers",1,"bg-f1-accent","text-black","px-6","py-3","rounded-lg","font-medium","hover:bg-f1-accent/80","transition-colors"]],template:function(i,l){i&1&&(e(0,"div",1),h(1,Y,1,0,"app-loading",2)(2,V,117,49,"div",3)(3,W,9,0,"div",4),t()),i&2&&(a(),m("ngIf",l.loading()),a(),m("ngIf",!l.loading()&&l.driverInfo()),a(),m("ngIf",!l.loading()&&!l.driverInfo()))},dependencies:[_,k,N,M,C,L,T,O,j],encapsulation:2})};export{$ as DriverDetail};
